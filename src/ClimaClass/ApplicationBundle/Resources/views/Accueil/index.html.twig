{%extends "ClimaClassApplicationBundle::layout.html.twig"%}
{% block content %}

    {%for report in reports%}
        <div class="col-sm-6 col-md-4">
            <div class="thumbnail">
                <div class="col-xs-12 cl-indicator">
                    <div class="col-xs-4">
                        <img src="{{asset('bundles/climaclassapplication/images/theme/Science_Thermometer_16.png')}}">
                        {%if report.lastMeasure is not null%}
                            {{report.lastMeasure.temperature}}°C
                        {%else%}
                            -
                        {%endif%}
                    </div>
                    <div class="col-xs-4">
                        <img src="{{asset('bundles/climaclassapplication/images/theme/Wind_sign_16.png')}}">
                        {%if report.lastMeasure is not null%}
                            {{report.lastMeasure.windSpeed}} km/h
                        {%else%}
                            -
                        {%endif%} 
                    </div>
                    <div class="col-xs-4">
                        <img src="{{asset('bundles/climaclassapplication/images/theme/Cloud_with_drops_of_water_16.png')}}">
                        {%if report.lastMeasure is not null%}
                            {{report.lastMeasure.rainLevel}} mm
                        {%else%}
                            -
                        {%endif%}  
                    </div>
                </div>
                <img src="{{asset('bundles/climaclassapplication/images/theme/thumbnail.png')}}">
                <div class="caption">
                    <h3 id="thumbnail-label">Thumbnail label<a class="anchorjs-link" href="#thumbnail-label"><span class="anchorjs-icon"></span></a></h3>
                    <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                </div>
                <div class="col-xs-12 square">
                    <div class="col-xs-6 col-xs-offset-3">
                        <p>
                        <div class="button"><a href="">Read</a></div>
                        </p>
                    </div>	
                </div>
            </div>
        </div> 
    {%endfor%}
    <form id="pager">
        <input type="button" class="navigation" name="previous" value="Previous" />
        <input type="button" class="navigation" name="next" value="Next" />
        <input type="hidden" id="page" value="1" />
    </form>
    <script>
        $(document).ready(function () {
            $('.navigation').click(function () {
                var page = parseInt($("#page").val());

                if ($(this).attr('name') == "previous" && page - 1 > 0) {
                    changePage(page - 1);
                } else if ($(this).attr('name') == "next") {
                    // TODO(adrien): Gérer la limite maximum
                    changePage(page + 1);
                }


            });
        });

        function changePage(pageNumber) {
            $.ajax({
                type: 'POST',
                data: {'page': pageNumber},
                url: "{{path('index') }}",
                success: function (response) {
                    $('.pagination').html(response);
                    $("#page").val(pageNumber);
                }
            });
        }
    </script>
{% endblock %}